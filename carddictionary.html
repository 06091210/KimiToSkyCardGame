<!--
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .card {
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    .card .info {
      padding: 10px;
      text-align: center;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.8);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      text-align: center;
      position: relative;
    }
    .modal-content img {
      width: 100%;
      border-radius: 10px;
    }
    .close {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 48px;
      cursor: pointer;
    }
  </style>
-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>カード図鑑</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;

      padding-top: 60px;
    }
    h1, h2 {
      text-align: center;
    }
    /* カード図鑑 */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .card {
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    .card .info {
      padding: 10px;
      text-align: center;
    }
    /* モーダル */
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.8);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      text-align: center;
      position: relative;
    }
    .modal-content img {
      width: 100%;
      border-radius: 10px;
    }
    .close {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 48px;
      cursor: pointer;
    }
    button, select {
      margin-top: 15px;
      padding: 3.2px 20px;
      border: none;
      background: #337ab7;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
    /* デッキ */
    .card-container, .deck-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 50px;
    }
    .deck-container .card {
      width: 100px;
    }
    .card img {
      width: 100%;
      border-radius: 4px;
    }
    .filter-row {
  width: 60%;
  margin: 0 auto 20px;
  display: flex;
  justify-content: center;
  gap: 20px;
}

.filter-row select {
  width: 100%;
  padding: 5px;
}
    #toTopBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  background-color: #A1E0F9;
  color: white;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0,0,0,0.2);
  display: none; /* 初期は非表示 */
  z-index: 1000;
  transition: background-color 0.3s;
}
    /* 共通：カード一覧のレイアウト */
#cardGrid, #deckList {
  display: grid;
  gap: 10px;
  justify-content: center;
}
    #cardGrid {
    grid-template-columns: repeat(5, 1fr);
  }

/* 縦画面（ポートレート）: 5枚ずつ */
@media (orientation: portrait) {
  #deckList {
    grid-template-columns: repeat(5, 1fr);
  }
}

/* 横画面（ランドスケープ）: 10枚ずつ */
@media (orientation: landscape) {
  #deckList {
    grid-template-columns: repeat(10, 1fr);
  }
}
.deck-code-container {
  text-align: center;   /* 中央寄せ */
}

.deck-code-container textarea {
  display: block;
  margin: 0 auto;
}
/* スマホなど極細画面 (幅 480px 以下を想定) */
@media screen and (max-width: 600px) {
  #cardGrid {
    grid-template-columns: repeat(1, 1fr); /* 1枚ごとに改行 */
  }
  #deckList {
    grid-template-columns: repeat(3, 1fr); /* 3枚ごとに改行 */
  }
}
  
  </style>
</head>
<body>
  
  <!--<h1>カード図鑑</h1>-->
  <input type="text" id="cardFilter" placeholder="カード名を検索" oninput="filterCards()" style="display:block; margin:0 auto 20px; padding:5px; width:60%;">
  <!--
  <select id="attributeFilter" onchange="filterCards()" style="display:block; margin:0 auto 20px; padding:5px; width:60%;">
  <option value="">すべての属性</option>
  <option value="火">火</option>
  <option value="水">水</option>
  <option value="草">草</option>
  <option value="土">土</option>
  <option value="風">風</option>
  <option value="雷">雷</option>
  <option value="光">光</option>
  <option value="闇">闇</option>
  <option value="無">無</option>
  </select>
  -->
  <div class="filter-row">
    
  <select id="attributeFilter" multiple size="3" onchange="filterCards()">
    <option value="火">火</option>
    <option value="水">水</option>
    <option value="草">草</option>
    <option value="風">風</option>
    <option value="雷">雷</option>
    <option value="光">光</option>
    <option value="闇">闇</option>
    <option value="無">無</option>
    <option value="なし">なし</option>
  </select>

  <select id="speciesFilter" multiple size="3" onchange="filterCards()">
    <option value="狂戦士">狂戦士</option>
    <option value="フィールドウォーカー">フィールドウォーカー</option>
    <option value="ヨミドリーム・マスターレジェンド">ヨミドリーム・マスターレジェンド</option>
    <option value="勇者">勇者</option>
    <option value="巨大文明">巨大文明</option>
    <option value="魂">魂</option>
    <option value="科学者">科学者</option>
    <option value="イベント">イベント</option>
    <option value="ドラゴン">ドラゴン</option>
    <option value="エンジェル">エンジェル</option>
    <option value="なし">なし</option>
  </select>
    
    <select id="typeFilter" onchange="filterCards()">
  <option value="">すべてのタイプ</option>
  <option value="スペル">スペル</option>
  <option value="キャラ">キャラ</option>
  <option value="勇者キャラ">勇者キャラ</option>
</select>

</div>

  <div class="deck-code-container">
    <textarea id="deckCode" rows="2" cols="50" placeholder="ここにコードが表示されます／貼り付けて復元"></textarea><br>
    <button onclick="generateDeckCode()">コードを生成</button>
    <button onclick="loadDeckFromCode()">コードから復元</button>
  </div>
  <div id="deckList" class="deck-container"></div>
  <div class="card-grid" id="cardGrid"></div>
  <!-- トップへ戻るボタン -->
  <button id="toTopBtn" onclick="scrollToTop()">↑</button>


  <!-- モーダル -->
  <!--<div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modalImg" src="" alt="">
      <h2 id="modalTitle"></h2>
      <p id="modalDesc"></p>
      <button onclick="addToDeckFromModal()">デッキに追加</button>
    </div>
  </div>-->
  <!-- モーダル -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <img id="modalImg" src="" alt="">
    <h2 id="modalTitle"></h2>
    <p id="modalDesc"></p>

    <!-- 枚数選択 -->
    <label for="cardCount">枚数:</label>
    <select id="cardCount">
      <option value="1">1枚</option>
      <option value="2">2枚</option>
      <option value="3">3枚</option>
      <option value="4">4枚</option>
      <option value="5">5枚</option>
    </select>

    <button onclick="addToDeckFromModal()">デッキに追加</button>
  </div>
</div>

  <script>
    const cards = [
//{ id: 1, name: '怒りの解放', image: 'images/ikarinokaiho.jpg', maxCopies: 5, attribute: [ '水', '火' ], species: [ '狂戦士', 'フィールドウォーカー' ], type: 'スペル' },
{ id: 1, name: '怒りの解放', image: 'images/ikarinokaiho.jpg', maxCopies: 5, attribute: ['水', '火'], species: ['狂戦士', 'フィールドウォーカー'], type: 'スペル' },
{ id: 2, name: '夢双覇王　サカタ＆リクシ', image: 'images/5C2985F1-2987-4C1D-AEFD-8E222D0326B5.jpg', maxCopies: 5, attribute: ['闇', '雷', '水', '光', '火', '風', '草'], species: ['ヨミドリーム・マスターレジェンド'], type: 'キャラ' },
{ id: 3, name: '森林の勇者　ソロン', image: 'images/03D903E2-D711-437D-B313-0E3BDBAAFA1D.jpg', maxCopies: 5, attribute: ['水', '風', '草'], species: ['勇者', '巨大文明'], type: '勇者キャラ' },
{ id: 4, name: '霊墓グレイブ＝ブリザード', image: 'images/AE07862D-1F23-4312-A6D8-6748E7BF5A23.jpg', maxCopies: 5, attribute: ['水', '火', '草'], species: ['魂', '科学者'], type: 'キャラ' },
{ id: 5, name: 'にんじんの収穫祭', image: 'images/ACF4BE2A-C659-41F2-896B-C9E942D3D748.jpg', maxCopies: 5, attribute: ['闇'], species: ['イベント'], type: 'スペル' },
{ id: 6, name: '天空の勇者　スカイ', image: 'images/781DEF8E-243D-45CF-9EFE-926CD21941E4.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['勇者', 'フィールドウォーカー'], type: '勇者キャラ' },
{ id: 7, name: '霊速ブランチ', image: 'images/9A90E905-FCFB-48FA-9F9D-317535EE466E.jpg', maxCopies: 5, attribute: ['水', '草'], species: ['魂', '科学者'], type: 'キャラ' },
{ id: 8, name: '新星旋律龍セイファリア', image: 'images/AA96AE97-7A60-4B68-951B-1F9E58E71821.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['フィールドウォーカー', 'ドラゴン', 'エンジェル'], type: 'キャラ' },
{ id: 9, name: '時蝕竜王ヴォルティス＝オメガ', image: 'images/05A961CD-8DE1-4619-A108-AE35C43A996B.jpg', maxCopies: 5, attribute: ['雷', '水'], species: ['ヴォルティス・ドラゴン'], type: 'キャラ' },
{ id: 10, name: 'スカイ＆ゆら〜絆の物語〜', image: 'images/D00C4909-7061-4932-81D1-DE7C77DF172B.jpg', maxCopies: 5, attribute: ['闇', '水', '光', '風'], species: ['youtuber', 'タッグ', 'バトラー', 'フィールドウォーカー'], type: 'キャラ' },
{ id: 11, name: '惑ウ代表　ツバキ', image: 'images/DEF86064-99A4-4400-A5EE-91A8CE782B68.jpg', maxCopies: 5, attribute: ['光', '雷'], species: ['忍', '影桜衆'], type: 'キャラ' },
{ id: 12, name: '森林精霊　リフィナ', image: 'images/59AD9A43-4B64-4B68-9398-FB8333F38691.jpg', maxCopies: 5, attribute: ['草'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 13, name: '歩ム旅人　ツバキ', image: 'images/863A89AF-1B1F-41C4-B2A5-6D0F77E6505C.jpg', maxCopies: 5, attribute: ['闇', '雷', '水', '光', '火', '風', '草'], species: ['忍', '影桜衆', 'フィールドウォーカー', '冒険者'], type: 'キャラ' },
{ id: 14, name: '騙ル混沌　ゆら', image: 'images/CAF93C8B-76A0-4F82-AC98-D85630061799.jpg', maxCopies: 5, attribute: ['闇', '水', '光'], species: ['忍', '影桜衆', 'バトラー'], type: 'キャラ' },
{ id: 15, name: 'ツヴァイクリスタ　ナギ', image: 'images/3E34B679-9EDF-4284-99A3-2804996E31A9.jpg', maxCopies: 5, attribute: ['光', '火'], species: ['真なる魔王'], type: 'キャラ' },
{ id: 16, name: '雷鳴妖精　ヴォルトリス', image: 'images/8A463066-8347-4B81-8FA5-B3ACB0E7D2BB.jpg', maxCopies: 5, attribute: ['雷'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 17, name: '原初の魔王　月光シエン', image: 'images/4E04C85B-2C70-46EB-A0F0-D49E4B3AFEB3.jpg', maxCopies: 5, attribute: ['闇', '雷'], species: ['ハンター', '魔王'], type: '魔王キャラ' },
{ id: 18, name: '炎水双覇　ポンテ', image: 'images/334674EC-B9CC-402C-8DB9-F320074C88F9.jpg', maxCopies: 5, attribute: ['水', '火'], species: ['マジカルプリズム', '冒険者'], type: 'キャラ' },
{ id: 19, name: '吹雪妖精　シルフィス', image: 'images/98501B6F-2448-46AC-B6B0-765C2E529EB0.jpg', maxCopies: 5, attribute: ['風'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 20, name: '天使妖精　ルミナ', image: 'images/DAD4988C-5D3F-44AE-ACD8-E9F9AAED4AA2.jpg', maxCopies: 5, attribute: ['光'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 21, name: '未来覇神　ポンテ＝ネクス', image: 'images/10C45FEB-31CC-458C-9434-EDA772E7C195.jpg', maxCopies: 5, attribute: ['水', '光', '火'], species: ['マジカルプリズム', '冒険者', 'ミラクル・ドラゴン'], type: 'キャラ' },
{ id: 22, name: 'きみスカ初期メン　シュウラ', image: 'images/kimisukashokimenShura.jpg', maxCopies: 5, attribute: ['闇', '雷', '火'], species: ['狂戦士', '冒険者'], type: 'キャラ' },
{ id: 23, name: '焔鬼　ボグロス', image: 'images/4D4FEAC9-CC15-4194-BEFD-CEB0D611F9E6.jpg', maxCopies: 5, attribute: ['火'], species: ['オーガ', '鬼'], type: 'キャラ' },
{ id: 24, name: 'FA 双闘王道　ギヌス', image: 'images/755290F1-2EF4-44DA-B31F-AA6658E07696.jpg', maxCopies: 5, attribute: ['闇', '水', '風'], species: ['呪術師', '槍使い', '魔法少女'], type: 'リプレイス' },
{ id: 25, name: '竜族の勇者　ラフワ', image: 'images/E812EC6D-378A-4E70-A90F-E20D0DCE66D2.jpg', maxCopies: 5, attribute: ['光', '火'], species: ['獣人族', 'ドラゴン', '勇者'], type: '勇者キャラ' },
{ id: 26, name: 'きみスカリーダー　スカイ', image: 'images/41A8E026-939C-401F-A07E-A797D164AB47.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['youtuber'], type: 'キャラ' },
{ id: 27, name: '順風妖精　シルフィス', image: 'images/DED04CC8-5FAB-4A53-8342-1819CA05EEF8.jpg', maxCopies: 5, attribute: ['風'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 28, name: '英雄龍ヴォルティス＝アルファ', image: 'images/A8C0734E-4CF5-4C6E-ACEB-58D06B2EBFB3.jpg', maxCopies: 5, attribute: ['水', '火'], species: ['マジカルプリズム', 'ヴォルティス・ドラゴン'], type: 'キャラ' },
{ id: 29, name: 'ラフワの絆', image: 'images/165E7F2D-44AC-4CC0-9701-D4BD8E3976EF.jpg', maxCopies: 5, attribute: ['火'], species: ['フィールドウォーカー', '獣人'], type: 'スペル' },
{ id: 30, name: '悪魔仮面マスカレイドスカイ', image: 'images/5C7FE992-BA42-4D6A-81C4-F231DA323ECB.jpg', maxCopies: 5, attribute: ['闇', '水', '風'], species: ['フィールドウォーカー'], type: 'キャラ' },
{ id: 31, name: 'FA 双刻王道　えな', image: 'images/9957D3A8-D685-4E1A-B42D-743CD37DD857.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['魔法少女'], type: 'リプレイス' },
{ id: 32, name: 'ひかちゃん　2ndanniversary', image: 'images/308EA930-2F85-4874-8600-6E95FA0DC866.jpg', maxCopies: 5, attribute: ['水'], species: ['youtuber'], type: 'リプレイス' },
{ id: 33, name: '水流妖精　ミュリエ', image: 'images/38F5004E-80A4-4428-8DA7-DAEBCB2FD698.jpg', maxCopies: 5, attribute: ['水'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 34, name: '天空の覇者　覚醒', image: 'images/E597C2C5-F7E9-48DF-883D-91BB2EE1013F.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['フィールドウォーカー'], type: 'スペル' },
{ id: 35, name: 'FA ラブ・トゥルーシュウラ', image: 'images/FALovetrueShura.jpg', maxCopies: 5, attribute: ['光', '火'], species: ['バトラー', '魔法少女'], type: 'キャラ' },
{ id: 36, name: '闇夜の勇者　ゆら', image: 'images/8F482479-0EB7-40B2-9F0E-1A73EFA12E05.jpg', maxCopies: 5, attribute: ['闇', '水'], species: ['勇者', 'バトラー'], type: '勇者キャラ' },
{ id: 37, name: '原初の魔王　憤怒シュウラ', image: 'images/52675B4F-1775-4C84-BF6F-DF87A794628A.jpg', maxCopies: 5, attribute: ['闇', '雷', '火'], species: ['魔王', '狂戦士'], type: '魔王キャラ' },
{ id: 38, name: 'FA 双結友王　ラフワ＆ソロン', image: 'images/5EA63C22-B7FB-4509-AFA8-CFC90F20857B.jpg', maxCopies: 5, attribute: ['火', '草'], species: ['魔法少女', 'ドラゴン', '獣人族', '巨大文明'], type: 'リプレイス' },
{ id: 39, name: '勇者再誕', image: 'images/3CA89F0A-5028-44FF-85E1-E50E2FDEDACB.jpg', maxCopies: 5, attribute: ['光'], species: ['フィールドウォーカー'], type: 'スペル' },
{ id: 40, name: 'FA 双結覇王　リクシ', image: 'images/2D8E4A5F-BB22-4B6F-B3A2-52352B38E025.jpg', maxCopies: 5, attribute: ['無'], species: ['魔法少女', 'ヨミドリーム'], type: 'リプレイス' },
{ id: 41, name: 'マジックスペルアインス', image: 'images/04C74117-CEF2-4E15-8812-BDECA4723E03.jpg', maxCopies: 5, attribute: ['雷'], species: ['なし'], type: 'スペル' },
{ id: 42, name: 'ゆら', image: 'images/A9D35CA5-F961-4E89-9518-5E60223D5814.jpg', maxCopies: 5, attribute: ['水', '闇', '光'], species: ['youtuber', 'バトラー'], type: 'キャラ' },
{ id: 43, name: '原初の魔王　大呪ギヌス', image: 'images/EADE0DE3-3D16-43C1-B002-151C383F0F74.jpg', maxCopies: 5, attribute: ['闇', '水', '風'], species: ['魔王', '呪術師'], type: '魔王キャラ' },
{ id: 44, name: 'きみスカ初期メン　スカイ', image: 'images/kimisukashokimenSky.jpg', maxCopies: 5, attribute: ['水'], species: ['フィールドウォーカー', 'エンジェル', 'youtuber'], type: 'キャラ' },
{ id: 45, name: 'マジックスペルフィーア', image: 'images/DDD7622F-1146-42B6-8BAE-2EC675B37F6D.jpg', maxCopies: 5, attribute: ['光'], species: ['なし'], type: 'スペル' },
{ id: 46, name: '双頭龍神〈炎龍王＆水龍王〉', image: 'images/9C262897-E22A-46BA-B04F-5873C62B2556.jpg', maxCopies: 5, attribute: ['水', '光', '火'], species: ['マジカルプリズム', 'ミラクル・ドラゴン', 'フュージョン', 'ヴォルティス・ドラゴン'], type: 'キャラ' },
{ id: 47, name: '天空の記憶', image: 'images/3A59544E-6B42-478D-AD4A-881D766885B9.jpg', maxCopies: 5, attribute: ['水'], species: ['フィールドウォーカー'], type: 'スペル' },
{ id: 48, name: '草原妖精　リフィナ', image: 'images/39A29143-476D-473E-91D6-F6C7AB17EE9C.jpg', maxCopies: 5, attribute: ['草'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 49, name: '夢界虎　ヴァリオン', image: 'images/22B0B7F3-4F40-4FE5-96EB-3639B7110A6E.jpg', maxCopies: 5, attribute: ['水'], species: ['ヨミドリーム', '神獣・ドラゴン'], type: 'キャラ' },
{ id: 50, name: 'スカイ〜決断の時〜', image: 'images/Skyketudannotoki.jpg', maxCopies: 5, attribute: ['水'], species: ['フィールドウォーカー', 'youtuber'], type: 'スペル' },
{ id: 51, name: 'FA ラブ・キュアスカイ', image: 'images/C31787F4-5B96-41AE-840F-11B8ED77E4E6.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['フィールドウォーカー', '魔法少女'], type: 'キャラ' },
{ id: 52, name: '奪う分身　スカイ', image: 'images/61DAA746-08BC-4F56-B065-541FA063C6C8.jpg', maxCopies: 5, attribute: ['水', '光', '風'], species: ['忍', '影桜衆', 'フィールドウォーカー'], type: 'キャラ' },
{ id: 53, name: '太陽聖鳥セリヴァン＝グレア', image: 'images/serivangurea.jpg', maxCopies: 5, attribute: ['光', '火', '草'], species: ['神獣・ドラゴン'], type: 'キャラ' },
{ id: 54, name: '原初の魔王　忘却ノゥツ', image: 'images/1F10DA84-BE8E-4D2C-9B3D-44D90563C1F0.jpg', maxCopies: 5, attribute: ['水', '火'], species: ['科学者', '魔王'], type: '魔王キャラ' },
{ id: 55, name: '希望設計図', image: 'images/5F4C347D-758F-49CE-A7F6-8BE0817FE845.jpg', maxCopies: 5, attribute: ['水', '光', '火', '草'], species: ['フィールドウォーカー', '巨大文明', 'バトラー', '獣人'], type: 'スペル' },
{ id: 56, name: 'スカイとスカイ', image: 'images/C003A0A0-F876-4166-B8B6-CCB2C6238814.jpg', maxCopies: 5, attribute: ['光'], species: ['フィールドウォーカー'], type: 'スペル' },
{ id: 57, name: 'FA 双刻覇道　アンヴィション', image: 'images/9395CF1C-8337-430E-82AC-9B643666547D.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム・タイガー', '魔法少女'], type: 'リプレイス' },
{ id: 58, name: 'FA ラブ・スカイクロス', image: 'images/9395CF1C-8337-430E-82AC-9B643666547D.jpg', maxCopies: 5, attribute: ['光', '風'], species: ['フィールドウォーカー', '魔法少女', '精霊'], type: 'キャラ' },
{ id: 59, name: '憤怒を包む風', image: 'images/C5955BCF-C52A-4535-8634-CE80DAD00B32.jpg', maxCopies: 5, attribute: ['風'], species: ['フィールドウォーカー'], type: 'スペル' },
{ id: 60, name: 'ソロンの祈り', image: 'images/BD925A4B-ADED-40D3-8BD5-83672AC62438.jpg', maxCopies: 5, attribute: ['草'], species: ['フィールドウォーカー', '巨大文明'], type: 'スペル' },
{ id: 61, name: '赤雷騎グルディアス', image: 'images/25AB7403-5289-4BAD-B457-A225C6A51FF6.jpg', maxCopies: 5, attribute: ['雷'], species: ['狂戦士'], type: 'キャラ' },
{ id: 62, name: '怒りの臨界点', image: 'images/64DA2E49-5368-46CF-AF4B-B702E4BD5EBE.jpg', maxCopies: 5, attribute: ['火'], species: ['狂戦士', '冒険者'], type: 'スペル' },
{ id: 63, name: 'FA 双焔覇道　ポンテ', image: 'images/E17EE5CC-01B3-48A2-A3D6-3E019CE99332.jpg', maxCopies: 5, attribute: ['水', '光', '火'], species: ['魔法少女', 'マジカルプリズム', 'フィールドウォーカー'], type: 'リプレイス' },
{ id: 64, name: 'FA 双速王道　マイカ', image: 'images/03173483-E570-4C97-A11A-22034B379085.jpg', maxCopies: 5, attribute: ['雷', '風'], species: ['魔法少女', 'パイロット'], type: 'リプレイス' },
{ id: 65, name: '怒りの魔法陣', image: 'images/D97C3086-03A0-4CA8-8BC8-F4E98BD16723.jpg', maxCopies: 5, attribute: ['闇', '雷', '火'], species: ['狂戦士', '魔法陣'], type: 'スペル' },
{ id: 66, name: '海乙女　イリュミ', image: 'images/69F46204-9832-4AFC-B78E-56DB53D794A2.jpg', maxCopies: 5, attribute: ['水'], species: ['マーメイド'], type: 'キャラ' },
{ id: 67, name: '太陽精霊　ルミナ', image: 'images/559BA3B3-8CC9-4F5A-B0A3-C31356866C83.jpg', maxCopies: 5, attribute: ['光'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 68, name: '破滅のヒカリ', image: 'images/50246C01-E94E-471C-9FD9-1E12D8E9D397.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['フィールドウォーカー'], type: 'スペル' },
{ id: 69, name: '4n0b1ノサダメ', image: 'images/8E2DCE1F-02A2-4A33-9CD8-7F51B9067FB9.jpg', maxCopies: 5, attribute: ['闇', '雷', '火'], species: ['忍', '影桜衆'], type: 'スペル' },
{ id: 70, name: 'シュウラとシュウラ', image: 'images/69F528BE-9614-4413-B643-B8648A666070.jpg', maxCopies: 5, attribute: ['闇'], species: ['狂戦士', '冒険者'], type: 'スペル' },
{ id: 71, name: 'FA 双星王道　ナギ', image: 'images/5FA32F71-3544-4425-BBF4-B5C6CC23F896.jpg', maxCopies: 5, attribute: ['光', '火'], species: ['魔法少女', '太陽神', '真なる魔王'], type: 'リプレイス' },
{ id: 72, name: '天地英明！サカタリクシ', image: 'images/tenchiemeSakatarikushi.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム・マスターレジェンド'], type: 'キャラ' },
{ id: 73, name: 'ゆらのお守り', image: 'images/yuranoomamori.jpg', maxCopies: 5, attribute: ['光'], species: ['フィールドウォーカー', 'バトラー'], type: 'スペル' },
{ id: 74, name: '炎龍王ヴォルティス＝ガンマ', image: 'images/4BD36F36-65B5-425A-86B8-D3494494B222.jpg', maxCopies: 5, attribute: ['火'], species: ['マジカルプリズム', 'ヴォルティス・ドラゴン', 'ファイア・ドラゴン'], type: 'キャラ' },
{ id: 75, name: 'FA 絶望堕天使カイ', image: 'images/359FAD73-C775-4F39-B724-B1AF9708115B.jpg', maxCopies: 5, attribute: ['闇'], species: ['魔法少女', '堕天使'], type: 'キャラ' },
{ id: 76, name: '旋律導機ラミエルコード', image: 'images/24726CA9-97E8-4299-A739-E67897392092.jpg', maxCopies: 5, attribute: ['水', '風'], species: ['フィールドウォーカー'], type: 'キャラ' },
{ id: 77, name: '双翼精霊リュアネア', image: 'images/879DF3E0-B1BB-48D0-B9DC-DDA7B265C2D9.jpg', maxCopies: 5, attribute: ['光', '風'], species: ['フィールドウォーカー'], type: 'キャラ' },
{ id: 78, name: '黒焔根刃', image: 'images/89BE4BB3-C411-4C0F-B075-A4EEB1441222.jpg', maxCopies: 5, attribute: ['雷', '火'], species: ['狂戦士'], type: '武具' },
{ id: 79, name: 'バグデリート', image: 'images/A74CBCA3-1A7E-42AB-B026-4BF4598EAD5A.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム'], type: 'スペル' },
{ id: 80, name: 'える＆ケモ耳フードスカイ', image: 'images/3AC006AF-4F54-4930-B46B-59C6209CE53D.jpg', maxCopies: 5, attribute: ['雷', '水'], species: ['youtuber', 'タッグ', 'Vtuber'], type: 'キャラ' },
{ id: 81, name: 'マジックスペルドライ', image: 'images/9904421B-5820-4978-8764-CE34D6702A3F.jpg', maxCopies: 5, attribute: ['闇'], species: ['なし'], type: 'スペル' },
{ id: 82, name: '超重武装ノゥツ＝ゼクスマキナ', image: 'images/A94758CE-FA88-46B8-8505-A763410477CB.jpg', maxCopies: 5, attribute: ['水'], species: ['科学者', '機械神'], type: 'キャラ' },
{ id: 83, name: 'FA 双闘覇道　クウヤ', image: 'images/1EDE3FD0-9463-4922-BE11-713CE6E3B4AF.jpg', maxCopies: 5, attribute: ['闇', '水', '風'], species: ['マスカレイド', '魔法少女'], type: 'リプレイス' },
{ id: 84, name: 'タッグ！スカイ＆ひかちゃん', image: 'images/2789CC69-CF2F-482A-B021-9AD64418D835.jpg', maxCopies: 5, attribute: ['闇', '雷', '水', '光', '火', '風', '草'], species: ['youtuber', 'タッグ'], type: 'キャラ' },
{ id: 85, name: '陽角獣ラマルゴン', image: 'images/4671E667-0C8D-4F76-89D0-7A73DD6911B7.jpg', maxCopies: 5, attribute: ['光', '火'], species: ['神獣・ドラゴン'], type: 'キャラ' },
{ id: 86, name: 'デルタ・ロード・アルター', image: 'images/D50052B9-2AA7-4686-8BEA-DD9195F59DC4.jpg', maxCopies: 5, attribute: ['闇', '水', '風'], species: ['呪術師', '影ギヌス', 'ヴォルティス・ドラゴン'], type: 'キャラ' },
{ id: 87, name: '黒閃精霊　ヴォルトリス', image: 'images/8078FC91-F61A-4C9F-B1FA-028A2C09D62D.jpg', maxCopies: 5, attribute: ['雷'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 88, name: 'ゆら　happy birthday2025', image: 'images/78C98062-1988-4711-93D6-95E731D66F7D.jpg', maxCopies: 5, attribute: ['闇', '水', '光'], species: ['なし'], type: 'スペル' },
{ id: 89, name: '蒼水妖精　ミュリエ', image: 'images/8CE594B0-9E77-4ACD-B58D-4F59CCDA7E92.jpg', maxCopies: 5, attribute: ['水'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 90, name: 'FA 双結覇王　サカタ', image: 'images/25879FB1-C7FE-4B65-9BF3-29DE3572F57F.jpg', maxCopies: 5, attribute: ['無'], species: ['魔法少女', 'ヨミドリーム'], type: 'リプレイス' },
{ id: 91, name: 'FA 双速覇道　ノゥツ', image: 'images/05697407-6BCF-4487-8135-DF627AF95C96.jpg', maxCopies: 5, attribute: ['雷', '風'], species: ['魔法少女', '科学者'], type: 'リプレイス' },
{ id: 92, name: '陽灼パンサー', image: 'images/7D3DD822-A73D-4191-A7A3-436C643228F6.jpg', maxCopies: 5, attribute: ['光', '火', '草'], species: ['神獣・ドラゴン'], type: 'キャラ' },
{ id: 93, name: '絶望設計図', image: 'images/18D08247-94CC-49AB-9CA0-03B000518946.jpg', maxCopies: 5, attribute: ['闇'], species: ['狂戦士', 'ハンター', '呪術師', '科学者'], type: 'スペル' },
{ id: 94, name: 'FA ラブ・クイーンゆら', image: 'images/07E3500A-7318-4F0F-86CA-57CCEDF78CBB.jpg', maxCopies: 5, attribute: ['闇', '光'], species: ['クイーン', '魔法少女', '精霊'], type: 'キャラ' },
{ id: 95, name: 'リクシ', image: 'images/15EBF1DC-20A1-4729-A7B0-D506183817E7.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム・マスター'], type: 'キャラ' },
{ id: 96, name: 'ポンテ', image: 'images/157D9DA0-2E6A-416F-9035-4565E787089A.jpg', maxCopies: 5, attribute: ['光', '火', '水'], species: ['youtuber', 'マジカルプリズム'], type: 'キャラ' },
{ id: 97, name: '災輪の獄王マル＝シュザム', image: 'images/CE9EE7E7-E94D-4776-84EC-6C115C524704.jpg', maxCopies: 5, attribute: ['闇'], species: ['狂戦士'], type: 'キャラ' },
{ id: 98, name: '夢双龍神　ヴォルティス＝ゼータ', image: 'images/32465BED-0F14-4C0F-9E31-2F43A062E6D8.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム', 'ヴォルティス・ドラゴン'], type: 'キャラ' },
{ id: 99, name: '応炎妖精　スパルナ', image: 'images/7CE172B1-F64C-4683-AAE9-C08864B45D69.jpg', maxCopies: 5, attribute: ['火'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 100, name: 'サカタのメロン', image: 'images/2439F67B-1D16-443C-95E6-0868AA30F2E9.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム'], type: 'スペル' },
{ id: 101, name: '戦ウ闘魂　シュウラ', image: 'images/931BDF82-2376-4D7C-A11E-A890805D917B.jpg', maxCopies: 5, attribute: ['闇', '水', '火'], species: ['忍', '影桜衆', '冒険者'], type: 'キャラ' },
{ id: 102, name: '轟獄魔　イグラルド', image: 'images/igurarudo.jpg', maxCopies: 5, attribute: ['火'], species: ['狂戦士'], type: 'キャラ' },
{ id: 103, name: 'ノゥツ', image: 'images/E5E24F92-CA0D-4BF2-96F0-4F788A38F353.jpg', maxCopies: 5, attribute: ['水', '火', '草'], species: ['youtuber', '研究者'], type: 'キャラ' },
{ id: 104, name: 'FA 双焔王道　ロイロア', image: 'images/20B70167-DF67-4428-874E-2F49AD19DB47.jpg', maxCopies: 5, attribute: ['水', '光', '火'], species: ['魔法少女', 'バトラー'], type: 'リプレイス' },
{ id: 105, name: 'シュウラ', image: 'images/8CC53901-80EF-4A41-B33B-4D01E0526B41.jpg', maxCopies: 5, attribute: ['火', '雷', '闇'], species: ['youtuber', '冒険者'], type: 'キャラ' },
{ id: 106, name: '魔法使いの魔法陣', image: 'images/A3466D77-A400-46BC-97B8-C8C21BE4D061.jpg', maxCopies: 5, attribute: ['水'], species: ['魔法少女'], type: 'スペル' },
{ id: 107, name: '水龍王ヴォルティス＝シータ', image: 'images/3ADAA8BB-EA48-462E-96AF-FA1992DB8576.jpg', maxCopies: 5, attribute: ['水'], species: ['マジカルプリズム', 'ヴォルティス・ドラゴン', 'アクア・ドラゴン'], type: 'キャラ' },
{ id: 108, name: '影桜衆の隠れ里', image: 'images/16536F9E-1F53-44B7-A5CB-517E1E3E58A0.jpg', maxCopies: 5, attribute: ['闇', '雷', '光'], species: ['忍', '影桜衆', 'フィールドウォーカー'], type: 'フィールド' },
{ id: 109, name: 'FA 双星覇道　シエン', image: 'images/BDC9F4B6-BFFA-4832-BAE6-987975C601FB.jpg', maxCopies: 5, attribute: ['闇', '光'], species: ['魔法少女', '月光神', 'ハンター'], type: 'リプレイス' },
{ id: 110, name: 'FA ラブ・ロンギヌス', image: 'images/6C934C84-5A4F-4E3F-AB05-A01E99F01126.jpg', maxCopies: 5, attribute: ['闇', '風'], species: ['魔法少女', '呪術師'], type: 'キャラ' },
{ id: 111, name: 'FA ラブ・ベアーヌル', image: 'images/FALovebeanuru.jpg', maxCopies: 5, attribute: ['無'], species: ['魔法少女', '精霊', 'ヨミドリーム'], type: 'キャラ' },
{ id: 112, name: 'ラフワ', image: 'images/EB5537D8-A993-4B56-915F-89956EC24CF7.jpg', maxCopies: 5, attribute: ['光', '火', '草'], species: ['youtuber', '獣人族', 'ドラゴン'], type: 'キャラ' },
{ id: 113, name: 'きみスカリーダー　スカイ', image: 'images/CC07EA73-9DDA-45C8-A2A9-0A9679FE8452.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['youtuber'], type: 'キャラ' },
{ id: 114, name: '月と森の誓い', image: 'images/D3994038-540A-4CA0-B189-51A3CF322C0A.jpg', maxCopies: 5, attribute: ['雷', '草'], species: ['youtuber', 'タッグ', '勇者', '魔王', 'ハンター', '巨大文明'], type: 'スペル' },
{ id: 115, name: 'ヴォルクス・ロード・アルター', image: 'images/96222852-B1BA-492D-8325-4AA6C623EE09.jpg', maxCopies: 5, attribute: ['闇', '風'], species: ['呪術師', '影ギヌス'], type: 'キャラ' },
{ id: 116, name: '漆黒の雷槍', image: 'images/9763D0B8-4F42-43B6-B3D8-D9F3306857DD.jpg', maxCopies: 5, attribute: ['闇', '雷', '水'], species: ['ハンター', '魔王'], type: 'スペル' },
{ id: 117, name: '悪魔妖精　ノクティア', image: 'images/29E86CD6-09BA-45D6-9354-C7479CD52AD0.jpg', maxCopies: 5, attribute: ['闇'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 118, name: '侵食精霊　ノクティア', image: 'images/74413E46-431C-4F9D-AF3F-8EB0751962E8.jpg', maxCopies: 5, attribute: ['闇'], species: ['妖精', '精霊'], type: 'キャラ' },
{ id: 119, name: 'リクシのチョコレート', image: 'images/A1A9C191-45BD-458C-AADD-B3E5E8615DB6.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム'], type: 'スペル' },
{ id: 120, name: 'ベータ・ロード・アルター', image: 'images/D47FB1D5-36C7-4CED-885E-5C10BA68D062.jpg', maxCopies: 5, attribute: ['闇', '火'], species: ['呪術師', '影ギヌス', 'ヴォルティス・ドラゴン'], type: 'キャラ' },
{ id: 121, name: 'グロスティ・ロード・アルター', image: 'images/5242FAC5-E7F5-4196-AB4D-B834C61AB539.jpg', maxCopies: 5, attribute: ['闇'], species: ['呪術師', '影ギヌス'], type: 'キャラ' },
{ id: 122, name: 'ソロン', image: 'images/BE36A2E9-B10B-4EFD-8136-0D4328CD68F3.jpg', maxCopies: 5, attribute: ['水', '風', '草'], species: ['youtuber', '巨大文明'], type: 'キャラ' },
{ id: 123, name: 'スカイ（ゆるキャラ）', image: 'images/952FC522-F1E1-4267-B934-656B4F82441C.jpg', maxCopies: 5, attribute: ['水'], species: ['ゆるキャラ', 'フィールドウォーカー'], type: 'キャラ' },
{ id: 124, name: 'ギヌス', image: 'images/C9F113A7-2D22-455F-8A23-9628785B37FC.jpg', maxCopies: 5, attribute: ['水', '風', '闇'], species: ['youtuber', '呪術師'], type: 'キャラ' },
{ id: 125, name: 'スカイ', image: 'images/4318BD7A-7C6D-4D20-9DC5-E55B592C9567.jpg', maxCopies: 5, attribute: ['水', '風', '光'], species: ['youtuber', 'フィールドウォーカー'], type: 'キャラ' },
{ id: 126, name: 'マジックスペルツヴァイ', image: 'images/AC8BDE9D-6404-4D15-AA83-93CD382A1663.jpg', maxCopies: 5, attribute: ['水'], species: ['なし'], type: 'スペル' },
{ id: 127, name: 'ソロン（ゆるキャラ）', image: 'images/4E0293FC-C2E7-4170-8053-C6FC8E61D437.jpg', maxCopies: 5, attribute: ['草'], species: ['ゆるキャラ', '巨大文明'], type: 'キャラ' },
{ id: 128, name: 'シエン', image: 'images/shien.jpg', maxCopies: 5, attribute: ['水', '雷', '闇'], species: ['youtuber', 'ハンター'], type: 'キャラ' },
{ id: 129, name: 'アグロス・ロード・アルター', image: 'images/C3F0D5D5-26FB-4673-AB6A-A12B7AB0F60E.jpg', maxCopies: 5, attribute: ['闇', '風'], species: ['呪術師', '影ギヌス'], type: 'キャラ' },
{ id: 130, name: 'サカタ', image: 'images/sakata.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミドリーム・マスター'], type: 'キャラ' },
{ id: 131, name: 'サカタリクシの時計', image: 'images/836D7F3C-A664-4275-8D96-1D56B46DF688.jpg', maxCopies: 5, attribute: ['無'], species: ['ヨミスペルドリーム'], type: 'スペル' },
{ id: 132, name: 'シュウラ（ゆるキャラ）', image: 'images/shurayuruchara.jpg', maxCopies: 5, attribute: ['火'], species: ['ゆるキャラ', '冒険者'], type: 'キャラ' },
{ id: 133, name: '根絶の書', image: 'images/5BBB3C38-60EE-420E-8985-868CF352096A.jpg', maxCopies: 5, attribute: ['火'], species: ['狂戦士', '冒険者'], type: 'スペル' },
{ id: 134, name: 'FA 刻の王道　ハーモニー', image: 'images/C3181F38-BCD1-4D05-BE0B-6319AF12819D.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['魔法少女', '精霊'], type: 'キャラ' },
{ id: 135, name: 'ゆら（ゆるキャラ）', image: 'images/yurayuruchara.jpg', maxCopies: 5, attribute: ['光'], species: ['ゆるキャラ', 'バトラー'], type: 'キャラ' },
{ id: 136, name: 'FA 刻の覇道　ヴィオラ', image: 'images/138492CA-5CCC-4649-AD48-711624C3BA67.jpg', maxCopies: 5, attribute: ['無'], species: ['魔法少女', '精霊'], type: 'キャラ' },
{ id: 137, name: '蒸影レイス', image: 'images/joeresu.jpg', maxCopies: 5, attribute: ['火', '草'], species: ['魂', '科学者'], type: 'キャラ' },
{ id: 138, name: 'FA ラブ・ユラリンク', image: 'images/2E398D12-DA69-4398-93E5-E0B237F009B5.jpg', maxCopies: 5, attribute: ['水', '光'], species: ['クイーン', '魔法少女', '精霊'], type: 'キャラ' },
{ id: 139, name: 'FA ラブ・スカイ', image: 'images/B7B0AA42-8EB8-4A77-A27C-3315BD12E76E.jpg', maxCopies: 5, attribute: ['光', '風', '草'], species: ['魔法少女', '精霊', '？', 'フィールドウォーカー'], type: 'キャラ' },
{ id: 140, name: 'FA ラブ・ライオネル', image: 'images/DF3C2D46-16C0-402E-89B2-291A80D7A3AB.jpg', maxCopies: 5, attribute: ['闇', '水'], species: ['魔法少女', '呪術師', '精霊'], type: 'キャラ' },
{ id: 141, name: 'FA 星の王道　キャワナギ', image: 'images/9063AB68-281F-46D6-8F43-2A56566B223C.jpg', maxCopies: 5, attribute: ['光', '火'], species: ['魔法少女', '精霊', '太陽'], type: 'キャラ' },
{ id: 142, name: 'FA 速度の覇道　ピース', image: 'images/5EDE5742-313B-4302-BB4C-A9ADAF0AA52D.jpg', maxCopies: 5, attribute: ['水', '火', '草'], species: ['魔法少女', '科学者', '精霊'], type: 'キャラ' },
{ id: 143, name: '月王降臨', image: 'images/BEE8D87A-A32C-4B1F-BA2C-993A29FE5D65.jpg', maxCopies: 5, attribute: ['闇'], species: ['ハンター'], type: 'スペル' },
{ id: 144, name: 'FA ラブ・バットコモリィ', image: 'images/A0C20EA9-EAB1-4B7D-9942-5FC998331ABB.jpg', maxCopies: 5, attribute: ['闇', '水', '火'], species: ['魔法少女', '精霊', 'マジカルプリズム'], type: 'キャラ' },
{ id: 145, name: 'FA ラブ・アリゲダイル', image: 'images/6782FC2D-CDB3-4F30-A4A8-8271C597F155.jpg', maxCopies: 5, attribute: ['雷', '光'], species: ['バトラー', '魔法少女', '精霊'], type: 'キャラ' },
{ id: 146, name: 'シェル・ロード・アルター', image: 'images/CE0E6522-39C8-4DC5-8CD5-CD12E3039EF6.jpg', maxCopies: 5, attribute: ['水', '風'], species: ['呪術師', '影ギヌス'], type: 'キャラ' },
{ id: 147, name: 'FA ラブ・シープソフィ', image: 'images/2C55BEB9-3738-428D-B3C8-4075372283E3.jpg', maxCopies: 5, attribute: ['風', '草'], species: ['魔法少女', '巨大文明', '精霊'], type: 'キャラ' },
{ id: 148, name: 'FA 速度の王道　ゾンバウ', image: 'images/3A33D3A8-C5F1-456C-B102-022A7F8364DC.jpg', maxCopies: 5, attribute: ['光', '風', '草'], species: ['魔法少女', '精霊', 'パイロット'], type: 'キャラ' },
{ id: 149, name: 'FA ラブ・チュリスピース', image: 'images/D3B8A245-F199-4E10-9B09-83D335B9E453.jpg', maxCopies: 5, attribute: ['火', '草'], species: ['魔法少女', '神獣', '精霊'], type: 'キャラ' },
{ id: 150, name: 'アシュタ・ロード・アルター', image: 'images/ashutarodealter.jpg', maxCopies: 5, attribute: ['闇', '水'], species: ['呪術師', '影ギヌス'], type: 'キャラ' }
   ];

    const cardGrid = document.getElementById("cardGrid");
    const deck = [];
    let selectedCard = null;

    // カード図鑑描画
    /*function renderCards(filteredCards = cards) {
      cardGrid.innerHTML = "";
      filteredCards.forEach(card => {
        const cardElement = document.createElement("div");
        cardElement.className = "card";
        cardElement.innerHTML = `
          <img src="${card.image}" alt="${card.name}">
          <div class="info"><h3>${card.name}</h3></div>
        `;
        cardElement.onclick = () => showModal(card);
        cardGrid.appendChild(cardElement);
      });
    }
    
    function filterCards() {
  const nameFilter = document.getElementById("cardFilter").value.toLowerCase();
  const attributeFilter = document.getElementById("attributeFilter").value;

  const filteredCards = cards.filter(card => {
    const matchesName = card.name.toLowerCase().includes(nameFilter);
    const matchesAttribute = attributeFilter === "" || card.attribute === attributeFilter;
    return matchesName && matchesAttribute;
  });

  renderCards(filteredCards);
}*/
//↑元
    /*function renderCards(filteredCards = cards) {
  cardGrid.innerHTML = "";

  filteredCards.forEach(card => {
    const cardElement = document.createElement("div");
    cardElement.className = "card";

    // 属性が配列なら join("・") で表示
    const attrText = Array.isArray(card.attribute) 
                     ? card.attribute.join("・") 
                     : card.attribute || "";

    cardElement.innerHTML = `
      <img src="${card.image}" alt="${card.name}">
      <div class="info">
        <h3>${card.name}</h3>
        <p>属性: ${attrText}</p>
      </div>
    `;

    cardElement.onclick = () => showModal(card);
    cardGrid.appendChild(cardElement);
  });
}
    
    function filterCards() {
  const nameFilter = document.getElementById("cardFilter").value.toLowerCase();

  // 選択された属性を配列として取得
  const checkedAttributes = Array.from(document.querySelectorAll('input[name="attr"]:checked'))
                                .map(cb => cb.value);

  const filteredCards = cards.filter(card => {
    // カード名フィルター
    const matchesName = card.name.toLowerCase().includes(nameFilter);

    // 属性フィルター
    // → 属性が未選択なら全て表示
    // → 何か選択されている場合、カードの属性配列にいずれかが含まれていれば表示
    const matchesAttribute = 
      checkedAttributes.length === 0 || 
      checkedAttributes.some(attr => card.attribute.includes(attr));

    return matchesName && matchesAttribute;
  });

  renderCards(filteredCards);
}

    // モーダル
    function showModal(card) {
      selectedCard = card;
      document.getElementById("modalImg").src = card.image;
      document.getElementById("modalTitle").textContent = card.name;
      document.getElementById("modalDesc").textContent = card.description;
      document.getElementById("modal").style.display = "block";
    }
    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }*/

    /* ====== renderCards を差し替え ======
function renderCards(filteredCards = cards) {
  cardGrid.innerHTML = "";

  filteredCards.forEach(card => {
    const cardElement = document.createElement("div");
    cardElement.className = "card";

    // 属性テキスト（配列 or 文字列 or 空）を正規化して表示
    const attrText = Array.isArray(card.attribute)
      ? card.attribute.map(a => a.trim()).filter(Boolean).join("・")
      : (card.attribute ? String(card.attribute).trim() : "");

    cardElement.innerHTML = `
      <img src="${card.image}" alt="${card.name}">
      <div class="info">
        <h3>${card.name}</h3>
        ${attrText ? `<p>属性: ${attrText}</p>` : ""}
      </div>
    `;

    cardElement.onclick = () => showModal(card);
    cardGrid.appendChild(cardElement);
  });
}*/
    function renderCards(filteredCards = cards) {
  cardGrid.innerHTML = "";

  filteredCards.forEach(card => {
    const cardElement = document.createElement("div");
    cardElement.className = "card";

    const attrText = Array.isArray(card.attribute)
      ? card.attribute.join("・")
      : (card.attribute || "");

    const speciesText = Array.isArray(card.species)
      ? card.species.join("/")
      : (card.species || "");

    cardElement.innerHTML = `
      <img src="${card.image}" alt="${card.name}">
      <div class="info">
        <h3>${card.name}</h3>
        ${speciesText ? `<p>種族: ${speciesText}</p>` : ""}
      </div>
    `;
    //↑ ${attrText ? `<p>属性: ${attrText}</p>` : ""}

    cardElement.onclick = () => showModal(card);
    cardGrid.appendChild(cardElement);
  });
}

// ====== 属性取得ユーティリティ（チェックボックス or multiple select に対応） ======
/*function getSelectedAttributes() {
  // 1) チェックボックス (name="attr")
  const checked = Array.from(document.querySelectorAll('input[name="attr"]:checked'))
                       .map(cb => cb.value.trim())
                       .filter(Boolean);
  if (checked.length) return checked;

  // 2) multiple select (id="attributeFilter")
  const select = document.getElementById('attributeFilter');
  if (select) {
    return Array.from(select.selectedOptions).map(o => o.value.trim()).filter(Boolean);
  }

  return [];
}
    // ✅ 種族チェックボックスの取得
function getSelectedSpecies() {
  return Array.from(document.querySelectorAll('input[name="species"]:checked'))
               .map(cb => cb.value.trim())
               .filter(Boolean);
}*/
    function getSelectedAttributes() {
  const select = document.getElementById("attributeFilter");
  return Array.from(select.selectedOptions).map(o => o.value);
}
function getSelectedSpecies() {
  const select = document.getElementById("speciesFilter");
  return Array.from(select.selectedOptions).map(o => o.value);
}

    function getSelectedType() {
  return document.getElementById("typeFilter").value;
}


/* ====== filterCards を差し替え ======
function filterCards() {
  const keyword = document.getElementById("cardFilter").value.trim().toLowerCase();
  const selectedAttrs = getSelectedAttributes(); // 選択された属性配列

  const filtered = cards.filter(card => {
    // カード名でフィルタ
    const matchesName = !keyword || card.name.toLowerCase().includes(keyword);

    // カード側の属性を配列に正規化
    const cardAttrs = Array.isArray(card.attribute)
      ? card.attribute.map(a => a.trim())
      : (card.attribute ? [String(card.attribute).trim()] : []);

    // ★AND検索★
    // selectedAttrs が空なら無条件通過
    // 1つ以上あれば「その全部が cardAttrs に含まれる」カードだけ残す
    const matchesAttr =
      selectedAttrs.length === 0 ||
      selectedAttrs.every(attr => cardAttrs.includes(attr));

    return matchesName && matchesAttr;
  });

  renderCards(filtered);
}*/
    /*function filterCards() {
  const keyword = document.getElementById("cardFilter").value.trim().toLowerCase();
  const selectedAttrs = getSelectedAttributes();   // 属性
  const selectedSpecies = getSelectedSpecies();    // ✅ 種族

  const filtered = cards.filter(card => {
    const matchesName =
      !keyword ||
      card.name.toLowerCase().includes(keyword);

    const cardAttrs = Array.isArray(card.attribute)
      ? card.attribute.map(a => a.trim())
      : (card.attribute ? [String(card.attribute).trim()] : []);

    const cardSpecies = Array.isArray(card.species)
      ? card.species.map(s => s.trim())
      : (card.species ? [String(card.species).trim()] : []);

    // ✅ 属性は AND検索
    const matchesAttr =
      selectedAttrs.length === 0 ||
      selectedAttrs.every(attr => cardAttrs.includes(attr));

    // ✅ 種族も AND検索
    const matchesSpecies =
      selectedSpecies.length === 0 ||
      selectedSpecies.every(sp => cardSpecies.includes(sp));

    return matchesName && matchesAttr && matchesSpecies;
  });

  renderCards(filtered);
}*/
/*    function filterCards() {
  const keyword = document.getElementById("cardFilter").value.trim().toLowerCase();

  const selectedAttrs = getSelectedAttributes();   // select版
  const selectedSpecies = getSelectedSpecies();   // select版

  const filtered = cards.filter(card => {
    const matchesName =
      !keyword || card.name.toLowerCase().includes(keyword);

    const cardAttrs = Array.isArray(card.attribute)
      ? card.attribute.map(a => a.trim())
      : (card.attribute ? [String(card.attribute).trim()] : []);

    const cardSpecies = Array.isArray(card.species)
      ? card.species.map(s => s.trim())
      : (card.species ? [String(card.species).trim()] : []);

    const matchesAttr =
      selectedAttrs.length === 0 ||
      selectedAttrs.every(attr => cardAttrs.includes(attr));

    const matchesSpecies =
      selectedSpecies.length === 0 ||
      selectedSpecies.every(sp => cardSpecies.includes(sp));

    return matchesName && matchesAttr && matchesSpecies;
  });

  renderCards(filtered);
}*/
    function filterCards() {
  const keyword = document.getElementById("cardFilter").value.trim().toLowerCase();

  const selectedAttrs = getSelectedAttributes();
  const selectedSpecies = getSelectedSpecies();
  const selectedType = getSelectedType();  // ←追加

  const filtered = cards.filter(card => {
    
    // 名前
    const matchesName =
      !keyword || card.name.toLowerCase().includes(keyword);

    // 属性（AND）
    const cardAttrs = Array.isArray(card.attribute)
      ? card.attribute.map(a => a.trim())
      : (card.attribute ? [String(card.attribute).trim()] : []);

    const matchesAttr =
      selectedAttrs.length === 0 ||
      selectedAttrs.every(attr => cardAttrs.includes(attr));

    // 種族（AND）
    const cardSpecies = Array.isArray(card.species)
      ? card.species.map(s => s.trim())
      : (card.species ? [String(card.species).trim()] : []);

    const matchesSpecies =
      selectedSpecies.length === 0 ||
      selectedSpecies.every(sp => cardSpecies.includes(sp));

    // ★タイプ（1つだけ／完全一致）
    const matchesType =
      !selectedType || card.type === selectedType;

    return matchesName && matchesAttr && matchesSpecies && matchesType;
  });

  renderCards(filtered);
}

// ====== showModal に属性表示を追加（任意だが便利） ======
function showModal(card) {
  selectedCard = card;
  document.getElementById("modalImg").src = card.image;
  document.getElementById("modalTitle").textContent = card.name;

  const attrText = Array.isArray(card.attribute)
    ? card.attribute.join("・")
    : (card.attribute || "");

  // description が空なら属性だけ表示
  document.getElementById("modalDesc").innerHTML =
    (card.description ? `<div>${card.description}</div>` : "")
    //+(attrText ? `<div>属性: ${attrText}</div>` : "");

  document.getElementById("modal").style.display = "block";
}
    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    /*function addToDeckFromModal() {
      if (selectedCard) {
        addToDeck(selectedCard);
        closeModal();
      }
    }*/
    function addToDeckFromModal() {
  if (!selectedCard) return;

  const count = parseInt(document.getElementById("cardCount").value, 10);

  for (let i = 0; i < count; i++) {
    addToDeck(selectedCard);
  }

  closeModal();
}

    // デッキ関連
    function renderDeck() {
      const deckList = document.getElementById("deckList");
      deckList.innerHTML = "";
      deck.forEach((card, index) => {
        const cardElement = document.createElement("div");
        cardElement.className = "card";
        cardElement.innerHTML = `<img src="${card.image}" alt="${card.name}">`;
        cardElement.onclick = () => removeFromDeck(index);
        deckList.appendChild(cardElement);
      });
    }

    function addToDeck(card) {
      if (deck.length >= 50) {
        alert("デッキは50枚までです！");
        return;
      }
      const sameCardCount = deck.filter(c => c.id === card.id).length;
      if (sameCardCount >= card.maxCopies) {
        alert(`このカード「${card.name}」はデッキに${card.maxCopies}枚までしか入れられません！`);
        return;
      }
      deck.push(card);
      renderDeck();
    }

    function removeFromDeck(index) {
      deck.splice(index, 1);
      renderDeck();
    }

    function generateDeckCode() {
      const counts = {};
      deck.forEach(card => {
        counts[card.id] = (counts[card.id] || 0) + 1;
      });
      const code = Object.entries(counts).map(([id, count]) => `${id}x${count}`).join(',');
      const deckCodeTextarea = document.getElementById("deckCode");
      deckCodeTextarea.value = code;
      if (!code) {
        alert("デッキが空です。カードを追加してください。");
        return;
      }
      navigator.clipboard.writeText(code)
        .then(() => alert("デッキコードをクリップボードにコピーしました！"))
        .catch(() => alert("コピーに失敗しました。手動でコピーしてください。"));
    }

    function loadDeckFromCode() {
      const code = document.getElementById("deckCode").value.trim();
      if (!code) return;
      const newDeck = [];
      const entries = code.split(',');
      for (const entry of entries) {
        const [idStr, countStr] = entry.split('x');
        const id = parseInt(idStr);
        const count = parseInt(countStr);
        const card = cards.find(c => c.id === id);
        if (!card || isNaN(count) || count <= 0 || count > card.maxCopies) {
          alert(`無効なカードIDや枚数です: ${entry}`);
          return;
        }
        for (let i = 0; i < count; i++) {
          newDeck.push(card);
        }
      }
      if (newDeck.length > 50) {
        alert("デッキは50枚までです！");
        return;
      }
      deck.length = 0;
      newDeck.forEach(card => deck.push(card));
      renderDeck();
    }
    // スクロールして下に行ったらボタンを表示
window.onscroll = function() {
  const btn = document.getElementById("toTopBtn");
  if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
    btn.style.display = "block";
  } else {
    btn.style.display = "none";
  }
};

// 上にスクロールする関数
function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: "smooth"
  });
}

    // 初期描画
    renderCards();
    renderDeck();
  </script>
</body>
</html>

